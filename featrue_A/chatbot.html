<!DOCTYPE html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="./chatbot.css">
        <script>
            
            let chatBotMsgBoxStat = 0;

            window.onload = () => {
                document.getElementById("btn").onclick = processText;
                //document.getElementById("i_result").innerHTML = result;
            };

            const processText =()=> {
                //어떤 메시지인지 text를 받아오고 그에 따는 if문처리를 switch문으로 대신했습니다.
                // let userMsgs = document.getElementsByClassName("user_msg");
                // let nowMsg = userMsgs = userMsgs[userMsgs.length - 1].textContent;
                // switch(nowMsg){
                //     case /회원가입/:
                //         //회원가입일때 처리하는 부분
                //         const parent = document.getElementsByClassName('chatbot_msg');
                //         const join = document.createElement(`<input type='button' value='회원 가입' onclick="join()"/>`);
                //         parent.appendChild(join);
                //         break;
                //     case "case1":
                //         //case1
                //         break;
                //     case "case2":
                //         //case2
                //         break;
                //     case "case3":
                //         //case3
                //         break;
                //     default:
                //         //default case
                // }
                let newDiv = document.createElement('div');
                newDiv.setAttribute("class","user_msg");

                let txtBox = document.getElementById("textarea");
                let lines = txtBox.value.split("\n");

                // generate HTML version of text
                let resultString = "<p>";
                for (let i = 0; i < lines.length; i++) {
                    resultString += lines[i] + "<br />";
                }
                resultString += "</p>";

                newDiv.innerHTML = resultString;
                document.getElementsByClassName("chat")[0].appendChild(newDiv);
                new_chatbot_msg(resultString);
            }

            const new_chatbot_msg=(str)=>{
                console.log(str);
                let newDiv = document.createElement('div');
                newDiv.setAttribute("class","chatbot_msg");
                newDiv.innerHTML = str;
                document.getElementsByClassName("chat")[0].appendChild(newDiv);
            }

        </script>
    </head>
    <body>
        <script src="" async defer></script>
        <nav class="navbar">
            <button class="back"></button>
            <p class="title">I LOVE SCHOOL</p>
        </nav>
        <section class="chat_section">

            <div class="chat">
            
            <%if(chatBotMsgBoxStat===0){%>
                <%}else{%>
                    console.log("hi")
                    <%}%>

            <div class="chatbot_msg">로그인이 필요합니다. 아이디를 입력해주세요.</div>
                <div id = "result" class="user_msg" id = "user_message">boostcamp</div>
                <div class="chatbot_msg">패스워드를 입력해주세요.</div>
                <div class="user_msg">********</div>
                <div class="chatbot_msg">인증되었습니다.</div>
            </div>

            <div class="user_input">
                <textarea id="textarea" placeholder="부캠봇에게 하고 싶은 말을 입력해주세요."></textarea>
                <button id = "btn">입력</button>
            </div>

        </section>
    </body>
</html>